{"version":3,"file":"uploader.min.js","sources":["../src/uploader.js"],"sourcesContent":["/**\n * Uploader module for local_questionconverter plugin.\n * @module local_questionconverter/uploader\n * @copyright 2026 Renzo Medina <medinast30@gmail.com>\n * @license http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport const init = () => {\n  const loader = document.getElementById(\"qc-loader\");\n  const progressBar = document.getElementById(\"qc-progress-bar\");\n  const moodleForm = document.querySelector(\".qc-moodle-form-wrapper form\");\n  let progressTimer = null;\n  let progressValue = 10;\n  let progressDirection = 1;\n\n  const startProgress = () => {\n    if (!progressBar || progressTimer) {\n      return;\n    }\n    progressValue = 10;\n    progressDirection = 1;\n    progressBar.style.transition = \"width 0.2s ease\";\n    progressBar.style.width = progressValue + \"%\";\n    progressTimer = setInterval(function () {\n      if (!loader || loader.classList.contains(\"hidden\")) {\n        stopProgress();\n        return;\n      }\n      progressValue += progressDirection * 8;\n      if (progressValue >= 90) {\n        progressValue = 90;\n        progressDirection = -1;\n      } else if (progressValue <= 10) {\n        progressValue = 10;\n        progressDirection = 1;\n      }\n      progressBar.style.width = progressValue + \"%\";\n    }, 200);\n  };\n  const stopProgress = () => {\n    if (progressTimer) {\n      clearInterval(progressTimer);\n      progressTimer = null;\n    }\n    if (progressBar) {\n      progressBar.style.width = \"10%\";\n    }\n  };\n  if (loader && moodleForm) {\n    moodleForm.addEventListener(\"submit\", function () {\n      if (\n        typeof moodleForm.checkValidity === \"function\" &&\n        !moodleForm.checkValidity()\n      ) {\n        loader.classList.add(\"hidden\");\n        loader.classList.remove(\"flex\");\n        stopProgress();\n        return;\n      }\n      loader.classList.remove(\"hidden\");\n      loader.classList.add(\"flex\");\n      startProgress();\n    });\n  }\n};\n"],"names":["loader","document","getElementById","progressBar","moodleForm","querySelector","progressTimer","progressValue","progressDirection","stopProgress","clearInterval","style","width","addEventListener","checkValidity","classList","add","remove","transition","setInterval","contains"],"mappings":"qKAOoB,WACZA,OAASC,SAASC,eAAe,aACjCC,YAAcF,SAASC,eAAe,mBACtCE,WAAaH,SAASI,cAAc,oCACtCC,cAAgB,KAChBC,cAAgB,GAChBC,kBAAoB,QA0BlBC,aAAe,KACfH,gBACFI,cAAcJ,eACdA,cAAgB,MAEdH,cACFA,YAAYQ,MAAMC,MAAQ,QAG1BZ,QAAUI,YACZA,WAAWS,iBAAiB,UAAU,cAEE,mBAA7BT,WAAWU,gBACjBV,WAAWU,uBAEZd,OAAOe,UAAUC,IAAI,UACrBhB,OAAOe,UAAUE,OAAO,aACxBR,eAGFT,OAAOe,UAAUE,OAAO,UACxBjB,OAAOe,UAAUC,IAAI,QA5ClBb,cAAeG,gBAGpBC,cAAgB,GAChBC,kBAAoB,EACpBL,YAAYQ,MAAMO,WAAa,kBAC/Bf,YAAYQ,MAAMC,MAAQL,cAAgB,IAC1CD,cAAgBa,aAAY,WACrBnB,SAAUA,OAAOe,UAAUK,SAAS,WAIzCb,eAAqC,EAApBC,kBACbD,eAAiB,IACnBA,cAAgB,GAChBC,mBAAqB,GACZD,eAAiB,KAC1BA,cAAgB,GAChBC,kBAAoB,GAEtBL,YAAYQ,MAAMC,MAAQL,cAAgB,KAXxCE,iBAYD"}